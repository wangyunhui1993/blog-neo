<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>neo博客首页</title>
		<meta name="keywords" content="个人博客,neo,工具,neo" />
		<meta name="description" content="neo个人博客，前端开发工程师。" />
		<link href="static/css/base.css" rel="stylesheet">
		<link href="static/css/index.css" rel="stylesheet">
		<!--[if lt IE 9]>
<script src="static/js/modernizr.js"></script>
<![endif]-->
		<script src="static/js/jquery.min.js"></script>
		<script src="static/js/doT.js"></script>
		<script src="static/js/api.js"></script>
	</head>
	<body>
		<header>
			<div id="logo"><a href="/"></a></div>
			<nav class="topnav" id="topnav">
			</nav>
		</header>
		<div class="banner">
			<section class="box">
				<ul class="texts">
					<p>打了死结的青春，捆死一颗苍白绝望的灵魂。</p>
					<p>为自己掘一个坟墓来葬心，红尘一梦，不再追寻。</p>
					<p>加了锁的青春，不会再因谁而推开心门。</p>
				</ul>
				<div class="avatar"><a href="#"><span>neo</span></a> </div>
			</section>
		</div>
		<article>
			<h2 class="title_tj">
				<p>文章<span>推荐</span></p>
			</h2>
			<div class="bloglist left" id="bloglist">
			</div>
			<aside class="right">
				<!-- <div class="weather"></div> -->
				<div class="news">
					<h3>
						<p>最新<span>文章</span></p>
					</h3>
					<ul class="rank" id="articlenewList">
					</ul>
					<h3 class="ph">
						<p>点击<span>排行</span></p>
					</h3>
					<ul class="paih" id="articleclickList">
					</ul>
					<h3 class="links">
						<p>友情<span>链接</span></p>
					</h3>
					<ul class="website">
						<li><a href="/">个人博客</a></li>
						<li><a href="/">个人github</a></li>
					</ul>
					<!-- Baidu Button BEGIN -->
					<div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"><a class="bds_tsina"></a><a class="bds_qzone"></a><a
						 class="bds_tqq"></a><a class="bds_renren"></a><span class="bds_more"></span><a class="shareCount"></a></div>
					<script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6574585"></script>
					<script type="text/javascript" id="bdshell_js"></script>
					<script type="text/javascript">
						document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" +
							Math.ceil(new Date() / 3600000)
					</script>
					<!-- Baidu Button END -->
					<!-- <a href="/" class="weixin"> </a> -->
			</aside>
		</article>
		<div class="pagelist">
			<a href="javascript:void(0);" onclick="page(2)">上一页</a>&nbsp;&nbsp;当前页：<span>1</span>&nbsp;&nbsp;<a href="javascript:void(0);"
			 onclick="page(2)">下一页</a>
		</div>
		<footer>
			<p>浙ICP备18006570号</p>
		</footer>
		<script src="static/js/silder.js"></script>
		<script type="text/javascript">
			function getArticles(page) {
				request("/blog_query", {
						pageNum: page,
						pageSize: 15
					},
					function(data) {
						if (data.err_code === 0) {
							if (data.list.length < 15 && page !== 1) {
								alert('已经是最后一页了');
								return false;
							}
							var evalText = doT.template($("#articleList").text());
							$("#bloglist").html(evalText(data.list));
							var evalText1 = doT.template($("#pageList").text());
							var pages = {
								current: page,
								size: data.list.length
							}
							$(".pagelist").html(evalText1(pages));
						}
					});
			}

			function getArticlesClick() {
				request("/blog_click", {},
					function(data) {
						if (data.err_code === 0) {
							var evalText = doT.template($("#articleClick").text());
							$("#articleclickList").html(evalText(data.list));
						}
					});
			}

			function getArticlesNew() {
				request("/blog_new", {},
					function(data) {
						if (data.err_code === 0) {
							var evalText = doT.template($("#articleNew").text());
							$("#articlenewList").html(evalText(data.list));
						}
					});
			}
			getArticles(1);
			getArticlesNew()
			getArticlesClick();

			function upPage(pages) {
				getArticles(--pages)
			}

			function downPage(pages) {
				getArticles(++pages)
			}
		</script>
		<script id="articleList" type="text/x-dot-template">
			{{ for(var prop of it) { }}
				<h3>{{= prop.article_name}}</h3>
				<figure><img src="static/picture/001.png"></figure>
				<ul>
					<div class="overflowHidden_3">{{= prop.article_content}}</div>
					<a title="/"  href="./detail.html?id={{=prop.article_id}}" target="_blank" class="readmore">阅读全文>></a>
				</ul>
				<p class="dateview"><span>{{=prop.article_time}}</span><span>Author：neo</span></p>
				{{ } }}
		</script>
		<script id="pageList" type="text/x-dot-template">
			{{?  it.current!==1}}
				<a href="javascript:void(0);" onclick="upPage({{=it.current}})">上一页</a>
				{{?}}
				&nbsp;&nbsp;当前页：
				<span>{{=it.current}}</span>
				&nbsp;&nbsp;
				<a href="javascript:void(0);" onclick="downPage({{=it.current}})">下一页</a>
		</script>
		<script id="articleClick" type="text/x-dot-template">
			{{ for(var prop of it) { }}
				<li><a href="./detail.html?id={{=prop.article_id}}" title="{{=prop.article_name}}" target="_blank">{{=prop.article_name}}</a></li>
				{{ } }}
	</script>
		<script id="articleNew" type="text/x-dot-template">
			{{ for(var prop of it) { }}
			<li><a href="./detail.html?id={{=prop.article_id}}" title="{{=prop.article_name}}" target="_blank">{{=prop.article_name}}</a></li>
			{{ } }}
</script>
	</body>
</html>
